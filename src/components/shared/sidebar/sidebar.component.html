<!-- Overlay for mobile -->
<div 
  (click)="closeSidebar()"
  [class]="sidebarOpen() ? 'opacity-50 pointer-events-auto' : 'opacity-0 pointer-events-none'"
  class="fixed inset-0 bg-black z-30 transition-opacity duration-300 md:hidden">
</div>

<aside 
  [class]="sidebarOpen() ? 'translate-x-0' : '-translate-x-full'"
  class="w-64 fixed inset-y-0 left-0 bg-brand-surface border-r border-brand-border flex flex-col z-40 transform transition-transform duration-300 ease-in-out md:translate-x-0">
  
  <!-- Logo -->
  <div class="h-20 flex items-center justify-center px-4 border-b border-brand-border flex-shrink-0">
    <img [src]="logo()" alt="Prime Communication Logo" class="h-12">
  </div>

  <!-- Navigation -->
  <nav class="flex-1 px-4 py-4 space-y-1 overflow-y-auto">
    <p class="px-4 pb-2 text-xs font-semibold uppercase tracking-wider text-brand-text-secondary">Menu</p>
    @for(tab of tabs(); track tab.id) {
      <button 
        (click)="selectTab(tab.id)"
        [class]="(activeTab() === tab.id ? 'bg-brand-nav-active-bg text-brand-nav-active-text font-semibold' : 'hover:bg-slate-100 font-normal text-brand-text-secondary') + ' w-full flex items-center gap-3 px-4 py-2.5 rounded-md text-sm transition-colors text-left group'">
        <svg [innerHTML]="tab.icon" class="h-6 w-6 shrink-0" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5"></svg>
        <span>{{ tab.name }}</span>
      </button>
    }
  </nav>

  <!-- User Profile -->
  <div class="p-4 border-t border-brand-border flex-shrink-0">
    @if(currentUser(); as user) {
      <div class="flex items-center gap-3 group">
        <div class="w-10 h-10 rounded-full bg-slate-700 text-white flex items-center justify-center font-bold text-sm shrink-0 border-2 border-white shadow-md">
          {{ getInitials(user.name) }}
        </div>
        <div class="flex-1 overflow-hidden">
          <p class="text-sm font-semibold text-brand-text-primary truncate">{{ user.name }}</p>
          <p class="text-xs text-brand-text-secondary capitalize">{{ user.role }}</p>
        </div>
        <button (click)="onLogout()" class="text-brand-text-secondary hover:text-brand-danger shrink-0 transition-colors" title="Logout">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" d="M15.75 9V5.25A2.25 2.25 0 0 0 13.5 3h-6a2.25 2.25 0 0 0-2.25 2.25v13.5A2.25 2.25 0 0 0 7.5 21h6a2.25 2.25 0 0 0 2.25-2.25V15m3 0 3-3m0 0-3-3m3 3H9" />
          </svg>
        </button>
      </div>
    }
  </div>
</aside>
